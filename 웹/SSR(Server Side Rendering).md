# Server Side Rendering 

### 의문 

서버에서 렌더링 한다는게 무슨말일까? 모호했지만, flask로 jinja를 사용해서 SSR을 구현해보고 어떤 일이 일어나는 건지 알게 되었다. 

### 렌더링이 뭔데? 

렌더링은 사진이나 이미지 영상을 만들어 내는 과정이지만, SSR과 CSR을 설명할 때에는 HTML 파일을 만들어내는 과정이라고 보는게 맞는 것 같다. HTML이 있으면 그대로 브라우저가 화면을 그려내니 얼추 맞는 말이다.

### 사실 서버 사이드 렌더링이 먼저다

10년 전만 해도 CSR과 SSR이 이렇게 비교될 주제가 아니었다. SSR이 당연한 것이었으니까.

브라우저가 거의 비어 있는 html 파일을 받고, JS 파일로 HTML을 만들어 화면을 그린다는 개념은 널리 사용된지 이제 10년 밖에 되지 않았다. 그 전에는 서버에서 HTML을 거의 완성하고 브라우저에게 넘겨주는게 당연한 것이었다. 웹의 태생이 이거였다.

하지만 리액트의 유행으로 CSR이라는 기괴한 방식의 브라우저 렌더링이 디폴트처럼 자리 잡게 된 것이다. 

### 리액트가 유행한 이유는 CSR이 SSR보다 좋아서가 아니다!

리액트의 개발 패러다임이 좋아서 유행한 것이다. 

컴포넌트 기반 아키텍처, 가상 DOM, 선언적 프로그래밍, 단방향 데이터 흐름 등 UI 개발에 편리한 기법들이 적용된 프레임 워크였기 때문에 유행한 것이다. 그리고 이러한 편리한 기법들을 구현하기 위해 프로그래밍 언어로 HTML을 생성해야 했다. 

가장 쉬운 방법은 브라우저가 읽을 수 있는 JS를 활용하는 것이었고, JS를 사용해서 편리한 UI 패러다임을 적용하여 HTML을 생성한다. 이 JS 파일들을 클라이언트 브라우저에서 먼저 받고, JS 파일을 실행시켜서 HTML을 동적으로 생성하여 브라우저에 화면을 그리게 된다.

쨋든, 브라우저에서 JS만 받아서 HTML을 완성하는건 리액트의 장점이 아니라는 점! 그냥 리액트의 목적을 달성하기 위한 가장 편리한 방법이었을 뿐이라는 점!

### 문제 발생 

이렇게 브라우저가 거의 비어 있는 HTML 파일을 받게 되면 문제가 생긴다. 초기 리액트 개발자들은 이런 점 까지는 고려하지 못했거나, 대수롭지 않게 생각했을 것 같다.

문제1: 지연

html을 받아서 바로 그리는 것보다 JS로 HTML을 만들어서 그리는게 당연히 느리다. 이게 처음에 웹 사이트에 접속했을 때 화면이 바로 나오지 않는다고 느껴질 만큼 느려지는 경우가 많기 때문에 문제인 것이다. 

문제2: 검색 최적화

구글 같은 웹 검색 엔진은 html의 요소들을 확인해서 검색 엔진 최적화(SEO, Search Engine Optimization)을 하게 되는데, js를 실행시키기 전에는 빈 html이라서 검색 엔진 최적화가 어려워진다. 그리고 이건 기업의 서비스에도 치명적일 수 있다. 

문제 1 보다도 문제 2로 인해 기업에 미치는 영향이 더 클 것이다. 결국 이러한 손해를 해결하기 위해 고민을 하게 되었을 것이다. 


### 해결할 수 있을 것 같은데? 

리액트의 장점을 그대로 가져가면서 클라이언트에 완성된 HTML을 전달하면 되는 거 아닌가? 

맞다. 그러면 된다. 

그냥 바로 떠오르는 방법은 JS를 미리 서버에서 실행시켜서 HTML 파일을 만들어 버리는 것이다. 

jinja 템플릿도 그냥 파이썬이 해당 jinja 템플릿의 코드를 확인해서 HTML을 생성하고 해당 위치에 꽂아넣어 HTML 파일을 만드는 과정에 지나지 않는다. 

마찬가지로 리액트도 JS를 사용해서 HTML을 만드는거고, 이걸 서버에서 실행시키면 된다. 

그게 Next.js다.

서버는 브라우저가 아닌데 어떻게 JS를 실행시키냐고? 노드js가 있잖아!!! 

