# DHCP(Dynamic Host Configuration Protocol)

## 언제 사용하는 프로토콜?
- 컴퓨터의 많은 기술들이 적은 리소스를 다양한 구성요소들이 공유하기 위한 꼼수들
- 공인 ip의 개수가 제한적이기 때문에 사설 ip를 활용 
- 공유기는 외부로는 하나의 공인 ip에 연결되어 있고, 내부에 연결된 기기들에 사설 ip를 부여하여 관리
- NAT, DHCP 같은 방법으로 이 작업을 수행
- DHCP는 기기가 공유기에 연결될 때 사설 IP를 받기 위해 요청하고 할당 받는 프로토콜

## DHCP를 쓰면 뭐가 좋지?
- 새롭게 연결된 기기가 자동으로 IP를 설정함. 
- DHCP를 사용하지 않으면 수동으로 각 기기마다 IP를 설정해야 함. 
- 네트워크가 연결될 때 마다 IP 주소가 할당되어 IP 주소를 효율적으로 사용할 수 있다.
    - "이 IP는 누구꺼야"가 없으니까, 그냥 반환하고 할당하는 행위만 하면 됨.

## 동작
#### 1. DHCP Discover
- 기기가 연결되면 IP 할당 해줄 서버를 찾기 위해 DHCP Discover 패킷을 브로드캐스트 함
#### 2. DHCP Offer
- DHCP 서버는 이 패킷을 받고, 사용 가능한 IP와 네트워크 설정들이 포함된 DHCP Offer 패킷을 응답함
#### 3. DHCP Request
- 기기는 브로드캐스트로 여러개의 서버에서 DHCP Offer 패킷을 받을 수도 있지만, 이 중 하나를 선택하고, 이 서버에게 다시 DHCP Request 패킷을 보내서 IP 주소 할당을 요청함
    - 기기 입장에서 여러 서버로부터 응답을 받을 수 있고, 서버의 응답 중에 하나를 선택해야 하는 과정이 있기 때문에, 너가 선택되었어! 라고 서버에게 알려주는 이 작업이 수반되어야 함
#### 4. DHCP Acknowledgment (ACK)
- DHCP ACK 패킷을 응답으로 보내서 IP 주소와 네트워크 설정을 확정함. 
- 이후 연결 완료.