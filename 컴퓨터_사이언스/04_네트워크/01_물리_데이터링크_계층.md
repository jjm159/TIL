# 물리 계층과 데이터 링크 계층
- 네트워크 참조 모델의 통신이 이루어지는 근원적 지점
- 이더넷, 이더넷 프레임, 통신 매체, 네트워크 장비

## 이더넷
- 통신 매체를 통해 신호를 송수신하는 방법, 데이터링크 계층에서 주고받는 데이터(프레임) 형식 등이 정의된 기술
- `IEEE 802.3`라는 이름으로 국제 표준화된 기술
    - IEEE 802.3은 이더넷과 관련된 다양한 표준들의 모음
- 두 가지 기억
    - 오늘날 유선 LAN 대부분이 이더넷 표준을 따르기 때문에 `대다수의 LAN 장비들이 특정 이더넷 표준을 따른다.`
    - 이더넷 표준이 달라지면 통신 매체의 종류를 비롯한 `신호 송수신 방법`, 나아가 `최대 지원 속도`도 달라질 수 있다.
- `이더넷 프레임`
    - 이더넷 기반의 네트워크에서 주고받는 프레임
- `이더넷 프레임` 구성 요소
    - 프리앰블
        - 송수신지 동기화 위해 사용되는 8바이트
    - 송수신지 MAC 주소
        - 6바이트 길이의 MAC 주소 명시
    - 타입/길이
        - 이 필드에 명시된 크기가 1500 이하면 프레임의 크기, 1536 이상이면 타입
    - 데이터
        - 최대 크기가 정해져 있음 
        - 일반적으로 1500 바이트 이하로 제한
        - MTU: 네트워크 계층 패킷(헤더 + 페이로드)의 최대 크기를 지칭
    - FCS - Frame Check Sequence
        - 트레일러
        - 프레임에 오류가 있는지 여부를 확인하기 위한 필드
---

## 유무선 통신 매체
- 성능의 기본
- 호스트가 1초에 100GB 송신할 수 있어도, 1초에 1GB 송수신 가능한 통신 매체를 사용하면 1GB가 최대
- `유선 매체` - `트위스티드 페어 케이블`
    - 가장 대표적인 유선 매체
    - 구리선을 통해 전기적으로 신호를 주고받는 통신 매체
    - 두 가닥씩 꼬아져 있는 구리선 때문에 붙은 이름
    - 카테고리를 통해 성능 알 수 있음
        - Cat5는 100Mbps, Cat5e는 1Gbps 등
    - 구리선으로 되어 있어 전기 신호에 왜곡을 줄 수 있는 주변 잡음에 취약
        - 이를 `노이즈` 라고 함
    - 포일 실드로 노이즈를 감소시킨 케이블을 FTP(Foil Twisted Pair), 
    - 구리선만 있는 케이블은 UTP(Unshielded Twisted Pair)
- `무선 매체` - `전파`와 `WiFi`
    - 대표적인 무선 매체인 전파
    - 전파는 3kHz ~ 3THz 사이의 진동수를 갖는 전자기파
    - 와이파이에 사용되는 전파의 진동수는 2.4GHz촤 5GHz
    - 유선 랜에서 가장 많이 사용되는 기술이 이더넷이라면, 무선 랜에서는 와이파이
    - 와이파이는 IEEE 802.11이라는 표준을 따르는 무선 랜 기술
    - 주파수 대역을 가지는 여러 무선 네트워크가 존재할 수 있음
        - 이는 `간섭`을 발생시킴
        - `채널`이라는 하위 주파수 대역으로 세분화하여 해결
        - 간섭이 일어나지 않는 주파수 대역들을 채널로 설정하여 할당

---

## NIC 네트워크 인터페이스
- 노드와 네트워크 사이의 통로
- 네트워크 인터페이스 마다 물리적 주소라고 불리는 MAC 주소가 부여
- NIC라는 하드웨어가 네트워크 인터페이스 역할을 담당함
- 역할
    - 통신 매체의 신호를 호스트가 이해하는 프레임으로 변환하거나 
    - 호스트가 이해하는 프레임을 통신 매체의 신호로 변환하는 역할 수행
- 입출력 장치와 다르지 않다
    - 패킷을 송신하는 건 출력
    - 패킷을 수신하는 건 입력
    - NIC를 작동시키는 시스템 콜이 호출되면 송수신이 수행되고 
    - 입출력이 완료되면 인터럽트를 통해 CPU에 작업이 완료됨을 알림
    - 대부분 DMA도 지원함
    - NIC도 입출력 장치이기 때문에 장비 별로 성능에 차이가 있다.

---

## 허브와 스위치
- 물리 계층과 데이터 링크 계층의 중간 노드
- 허브는 잘 사용되지 않음
- 물리 계층의 `허브`
    - 리피터 허브, 이더넷 허브라고도 불림
    - 케이블의 커넥처가 꽂히는 부분을 포트라고 함
    - 특징
        - 전달받은 신호를 모든 포트로 내보낸다.
            - 판단 없이 무조건 모든 포트에 보냄
        - 반이중 모드 통신을 한다. 
            - 송신과 수신을 동시에 못하고, 한번에 하나만 수행
            - 반대 개념으로 전이중 모드가 있음. 이는 한번에 송수신이 가능한 통신 모드
    - 충돌
        - 반이중 모드이기 때문에 동시에 여러 호스트가 전송하는게 안되는데,
        - 동시에 하려고 하면 충돌이 발생함
        - 충돌이 발생할 수 있는 영역을 `콜리전 도메인` 이라고 함
        - 허브에서 충돌이 발생할 수 있는 영역인 콜리전 도메인은 허브에 연결된 모든 호스트임
            - 전달받은 신호를 모든 포트로 내보내면서 반이중 모드로 통신하기 때문
- 데이터 링크 계층의 `스위치`
    - 허브의 한계를 보완하기 위한 네트워크 장비
    - 목적지 호스트가 연결된 포트로만 신호를 내보내고, 전이중 모드를 지원함
    - 여기서 스위치는 데이터 링크 계층에서 사용하는 스위치라서 L2 스위치라고도 부름
        - 더 상위 계층에서 사용하는 L3, L4 스위치도 있음
    - `MAC 주소 학습` 기능
        - 데이터 링크 계층이기 때문에 MAC 주소 이해 가능
        - 프레임 속에 MAC 주소를 읽어 어떤 포트에 어떤 MAC 주소를 가진 호스트가 있는지 확인
        - 포트:MAC주소의 `MAC 주소 테이블`을 참조하여 해당 포트로 프레임 전달
        - 이 테이블 정보를 생성하고 참조하는 기능이 스위치에는 존재
    - VLAN 기능
        - 스위치에 연결된 호스트를 무조건 하나의 네트워크로 보지 않음
        - 논리적인 네트워크로 나눠 사용할 수 있음

---

## 참조
- 이것이 컴퓨터 과학이다